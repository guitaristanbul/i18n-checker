<mvc:View controllerName="devepos.i18ncheck.controller.Detail"
    xmlns:form="sap.ui.layout.form"
    xmlns:semantic="sap.m.semantic"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.m"
    xmlns="sap.uxap">

    <ObjectPageLayout id="ObjectPageLayout"
        class="sapUiNoContentPadding"
        showTitleInHeaderContent="true"
        upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <expandedHeading>
                    <m:FlexBox wrap="Wrap"
                        fitContainer="true"
                        alignItems="Center">
                        <m:Title text="{bspName}"
                            wrapping="true"
                            class="sapUiTinyMarginEnd sapUiTinyMarginTop"/>
                    </m:FlexBox>
                </expandedHeading>

                <snappedHeading>
                    <m:FlexBox wrap="Wrap"
                        fitContainer="true"
                        alignItems="Center">
                        <m:FlexBox wrap="NoWrap"
                            fitContainer="true"
                            alignItems="Center"
                            class="sapUiTinyMarginEnd">
                            <m:Title text="{bspName}"
                                wrapping="true"
                                class="sapUiTinyMarginEnd"/>
                        </m:FlexBox>
                    </m:FlexBox>
                </snappedHeading>

                <expandedContent>
                    <m:Text text="{description}"/>
                </expandedContent>

                <snappedContent>
                    <m:Text text="{description}"/>
                </snappedContent>

                <actions>
                    <m:OverflowToolbarButton icon="sap-icon://fontawesome/git"
                        tooltip="{i18n>gitRepositoryAssignAction}"
                        press="onAssignGitRepo"/>
                </actions>

                <navigationActions>
                    <m:OverflowToolbarButton type="Transparent"
                        icon="sap-icon://full-screen"
                        press="handleFullScreen"
                        tooltip="Enter Full Screen Mode"
                        visible="{= ${layout>/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
                    <m:OverflowToolbarButton type="Transparent"
                        icon="sap-icon://exit-full-screen"
                        press="handleExitFullScreen"
                        tooltip="Exit Full Screen Mode"
                        visible="{= ${layout>/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
                    <m:OverflowToolbarButton type="Transparent"
                        icon="sap-icon://decline"
                        press="handleClose"
                        tooltip="Close column"
                        visible="{= ${layout>/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </navigationActions>

            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <m:FlexBox wrap="Wrap">
                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <m:HBox alignItems="Center">
                        <m:Label text="{i18n>checkedFileCount}"
                            class="sapUiTinyMarginEnd" />
                        <m:Text text="{checkedFiles}"
                            textAlign="Initial" />
                    </m:HBox>
                    <m:HBox alignItems="Center">
                        <m:Label class="sapUiTinyMarginEnd"
                            text="{i18n>gitRepository}" />
                        <m:Link href="{gitUrl}"
                            text="{gitUrl}"
                            target="__blank"
                            visible="{= !!${gitUrl}}"/>
                        <m:Label text="{i18n>noGitRepoAssigned}"
                            visible="{= !${gitUrl}}"/>
                    </m:HBox>
                </layout:VerticalLayout>
            </m:FlexBox>
        </headerContent>

        <sections>
            <ObjectPageSection titleUppercase="false"
                id="messagesSection"
                title="{i18n>messagesSectionTitle}"
                importance="Medium">

                <subSections>
                    <ObjectPageSubSection id="checkResultSubSection"
                        titleUppercase="false">
                        <m:Table id="i18nMessages"
                            inset="false"
                            sticky="ColumnHeaders,HeaderToolbar"
                            mode="MultiSelect"
                            busy="{viewModel>/busy}"
                            growing="true"
                            growingThreshold="20"
                            selectionChange="onMessageTableSelectionChange"
                            items="{ 
                                        path: 'i18nResults',
                                        sorter: {
                                            path: 'file/path'
                                        }
                                    }">
                            <m:headerToolbar>
                                <m:OverflowToolbar>
                                    <m:Title text="{
                                                        parts: [
                                                            'i18n>messagesTableTitle',
                                                            'i18nResults/length'
                                                        ],
                                                        formatter: '.formatMessage'
                                                    }"/>
                                    <m:ToolbarSpacer />
                                    <m:Button text="{i18n>excludeButton}"
                                        tooltip="{i18n>excludeButtonTooltip}"
                                        press="onExcludeMessages"
                                        enabled="{viewModel>/excludeActionEnabled}"/>
                                    <m:Button text="{i18n>includeButton}"
                                        tooltip="{i18n>includeButtonTooltip}"
                                        press="onIncludeMessages"
                                        enabled="{viewModel>/includeActionEnabled}"/>
                                </m:OverflowToolbar>
                            </m:headerToolbar>
                            <m:columns>
                                <m:Column width="5em">
                                    <m:Text text="{i18n>statusCol}"/>
                                </m:Column>
                                <m:Column>
                                    <m:Text text="{i18n>filePathCol}" />
                                </m:Column>
                                <m:Column width="10em">
                                    <m:Text text="{i18n>fileNameCol}" />
                                </m:Column>
                                <m:Column width="20em">
                                    <m:Text text="{i18n>messageTypeCol}" />
                                </m:Column>
                                <m:Column demandPopin="true"
                                    minScreenWidth="1000px">
                                    <m:Text text="{i18n>messageCol}" />
                                </m:Column>
                            </m:columns>
                            <m:items>
                                <m:ColumnListItem type="Active">
                                    <m:cells>
                                        <core:Icon src="sap-icon://hide"
                                            visible="{= !!${ignEntryUuid}}" />
                                        <m:ObjectIdentifier title="{file/path}"/>
                                        <m:Text text="{file/name}" />
                                        <m:Text text="{
                                            path: 'messageType',
                                            formatter: '.formatter.getTextForKey'
                                        }"/>
                                        <m:FormattedText htmlText="{message}" />
                                    </m:cells>
                                </m:ColumnListItem>
                            </m:items>
                        </m:Table>
                    </ObjectPageSubSection>

                </subSections>
            </ObjectPageSection>
        </sections>
        <footer>
            <m:OverflowToolbar>
                <m:ToolbarSpacer />
                <m:Button type="Accept"
                    text="Accept"/>
                <m:Button type="Reject"
                    text="Reject"/>
            </m:OverflowToolbar>
        </footer>
    </ObjectPageLayout>
</mvc:View>